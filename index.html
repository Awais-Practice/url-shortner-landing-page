<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css"
      integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w=="
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <title>Document</title>
  </head>
  <body>
    <div id="mainContainer">
      <!-- Header Container code start here -->
      <div class="header">
        <div class="buttonBox">
          <button
            class="linkBtn"
            data-bs-toggle="modal"
            data-bs-target="#exampleModal"
          >
            + Create New Link <img src="./assets/images/share-link.svg" alt="" /
            class="ml-10">
          </button>
        </div>

        <div class="buttonBox settingBtn">
          <button>
            <img src="./assets/images/settings.svg" alt="" class="settingImg" />
          </button>
        </div>
      </div>
      <!-- Header Container code end here -->

      <!-- Content Container code start here  -->
      <div id="contentContainer">
     

        <div class="widget">

          <div class="collapseButton" onclick="toggleChart()" id="collapseChartButton">Collapse Chart</div>
          <div class="collapseButton collapseChart-map" onclick="toggleMap()" id="collapseMapButton">Collapse Map</div>
          <div class="col" id="chartColumn">
          
            <div class="col-chart" style="padding: 20px; padding-bottom:100px">
              <h4 style="margin-left: 30px; margin-top: 10px">
                Line Chart Title Here
              </h4>
              <canvas id="canvas" style="width:100%; "></canvas>
            </div>
          </div>
  
          <div class="col" id="mapColumn">
            <div class="col-chart" style="padding: 20px">
              <div id="map" style="width: 100%; height: 100%"></div>
            </div>
           
          </div>
        </div>

      </div>
    </div>

    <!-- Button trigger modal -->

    <!-- Modal -->

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Create New Link</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
              onclick="resetNewLinkDialog()"
            ></button>
          </div>
          <div class="modal-body">
            <div class="content">
              <div id="newLinkEditorContent">
                <div class="row" style="margin-bottom: 45px">
                  <div class="col-sm-12" style="position: relative">
                    <div id="step1" class="contentStep active">
                      <label for=""> Paste Long URL </label><br />
                      <input type="text" />
                      <div class="inputBtn">Create Short URL</div>
                    </div>

                    <div id="step2" class="contentStep">
                      <div class="row">
                        <div class="col-sm-6">
                          <label for=""> Pick a custom Domain </label><br />
                          <div class="dropdown">
                            <input
                              type="button"
                              class="input btn btn-secondary dropdown-toggle"
                              href="#"
                              role="button"
                              id="dropdownMenuLink"
                              data-bs-toggle="dropdown"
                              aria-expanded="false"
                            />

                            <div
                              class="dropdown-menu domainSelector"
                              aria-labelledby="dropdownMenuLink"
                            >
                              <h4>Select a custom domain</h4>
                              <div class="domainSelections">
                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('amzn.how')"
                                >
                                  amzn.how
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('ytube.page')"
                                >
                                  ytube.page
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('twttr.site')"
                                >
                                  twttr.site
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('ebay.party')"
                                >
                                  ebay.party
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('yelp.pw')"
                                >
                                  yelp.pw
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('inkd.dev')"
                                >
                                  inkd.dev
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('insta.blue')"
                                >
                                  insta.blue
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('etsy.one')"
                                >
                                  etsy.one
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('pintrest.blue')"
                                >
                                  pintrest.blue
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('wlmart.in')"
                                >
                                  wlmart.in
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('reddit.fyi')"
                                >
                                  reddit.fyi
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('wiki.army')"
                                >
                                  wiki.army
                                </div>

                                <div
                                  class="domainSelection"
                                  onclick="selectCustomDomain('claim.run')"
                                >
                                  claim.run
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="col-sm-6">
                          <label for=""> Input Desired Keyword </label><br />
                          <input type="text" class="input" />
                        </div>
                      </div>
                    </div>

                    <div id="step3" class="contentStep">
                      <div class="row">
                        <div class="col-sm-12">
                          <label for=""> UTM Source </label><br />
                          <input type="text" placeholder="Enter" />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-12">
                          <label for=""> UTM Medium </label><br />
                          <input type="text" placeholder="Enter" />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-12">
                          <label for=""> UTM Campaign </label><br />
                          <input type="text" placeholder="Enter" />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-12">
                          <label for=""> UTM Term </label><br />
                          <input type="text" placeholder="Enter" />
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-12">
                          <label for=""> UTM Content </label><br />
                          <input type="text" placeholder="Enter" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Next Previous buttons -->
                <div style="display: flex; justify-content: center">
                  <button
                    id="newLinkBackButton"
                    onclick="newLinkPreviousStep()"
                    type="button"
                    class="btn btn-default"
                    style="margin-right: 20px"
                  >
                    <div style="display: inline-block; margin-right: 10px">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-arrow-left"
                        viewBox="0 0 16 16"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"
                        />
                      </svg>
                    </div>

                    Go Back
                  </button>

                  <button
                    id="newLinkNextButton"
                    onclick="newLinkNextStep()"
                    type="button"
                    class="btn btn-primary"
                  >
                    Next Step
                    <div style="display: inline-block; margin-left: 10px">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-arrow-right"
                        viewBox="0 0 16 16"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"
                        />
                      </svg>
                    </div>
                  </button>

                  <button
                    id="newLinkSubmitButton"
                    onclick="submitNewLink()"
                    type="button"
                    class="btn btn-primary"
                  >
                    Create Short Url
                  </button>
                </div>
              </div>
              <!-- Stepper -->
              <div class="modalStepper">
                <div class="modalStepperContent">
                  <div class="stepperLine">
                    <div class="stepperLineProgress"></div>
                  </div>
                  <div
                    class="modalStep active"
                    id="modalStep1"
                    onclick="openNewLinkContentStep(1)"
                  >
                    <div class="circle">1</div>
                    <div class="label">Paste Link</div>
                  </div>

                  <div
                    class="modalStep"
                    id="modalStep2"
                    onclick="openNewLinkContentStep(2)"
                  >
                    <div class="circle">2</div>
                    <div class="label">Select Domain</div>
                  </div>

                  <div
                    class="modalStep"
                    id="modalStep3"
                    onclick="openNewLinkContentStep(3)"
                  >
                    <div class="circle">3</div>
                    <div class="label">Done</div>
                  </div>
                </div>
              </div>

              <div id="linkCreatedResult">
                <div class="row">
                  <div class="col-sm-12">
                    <label for=""> Here's your link</label><br />
                    <input
                      type="text"
                      class="input"
                      readonly
                      placeholder="Enter"
                      value="ytube.page/ChartGraph"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div> -->
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
      integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"
      integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
      integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
      crossorigin="anonymous"
    ></script>
    <script src="./assets/vendors/charts.js/utils.js"></script>
    <script src="./assets/vendors/charts.js/charts.js"></script>
    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>
    <script>
      let newLinkStep = 1;
      let selectedCustomDomain = "amzon.how";

      function selectCustomDomain(domain) {
        document.querySelector("#dropdownMenuLink").value = domain;
        selectedCustomDomain = domain;
      }

      function newLinkNextStep() {
        // limit steps upto 3 max
        if (newLinkStep < 3) {
          newLinkStep++;
          openNewLinkContentStep(newLinkStep);
        }
      }

      function openNewLinkStepperStep(pNewLinkStep) {
        let steps = document.querySelectorAll(".modalStep");
        steps.forEach((step, index) => {
          if (index + 1 > pNewLinkStep) step.classList.remove("active");
          else step.classList.add("active");
        });

        if (pNewLinkStep === 1)
          document.querySelector(".stepperLineProgress").style.width = "0";
        else if (pNewLinkStep === 2)
          document.querySelector(".stepperLineProgress").style.width = "50%";
        else if (pNewLinkStep === 3)
          document.querySelector(".stepperLineProgress").style.width = "100%";
      }

      function openNewLinkContentStep(pNewLinkStep) {
        let steps = document.querySelectorAll(".contentStep");
        steps.forEach((step) => {
          step.classList.remove("active");
        });

        document.querySelector("#step" + pNewLinkStep).classList.add("active");

        if (pNewLinkStep === 2) showNewLinkBackButton();
        else hideNewLinkBackButton();

        if (pNewLinkStep === 3) {
          showNewLinkSubmitButton();
          hideNewLinkNextButton();
        } else {
          showNewLinkNextButton();
          hideNewLinkSubmitButton();
        }

        newLinkStep = pNewLinkStep;
        openNewLinkStepperStep(newLinkStep);
      }

      function showNewLinkSubmitButton() {
        document.querySelector("#newLinkSubmitButton").style.display = "block";
      }
      function hideNewLinkSubmitButton() {
        document.querySelector("#newLinkSubmitButton").style.display = "none";
      }

      function showNewLinkBackButton() {
        document.querySelector("#newLinkBackButton").style.display = "block";
      }
      function hideNewLinkBackButton() {
        document.querySelector("#newLinkBackButton").style.display = "none";
      }

      function showNewLinkNextButton() {
        document.querySelector("#newLinkNextButton").style.display = "block";
      }
      function hideNewLinkNextButton() {
        document.querySelector("#newLinkNextButton").style.display = "none";
      }

      function newLinkPreviousStep() {
        // limit prev steps upto 1 min
        if (newLinkStep > 1) {
          newLinkStep--;
          openNewLinkContentStep(newLinkStep);
        }
      }

      function resetNewLinkDialog() {
        openNewLinkContentStep(1);
        document.querySelector("#newLinkEditorContent").style.display = "block";
        document.querySelector("#linkCreatedResult").style.display = "none";
      }

      function submitNewLink() {
        document.querySelector("#newLinkEditorContent").style.display = "none";
        document.querySelector("#linkCreatedResult").style.display = "block";
      }

      let map;

      function drawMap() {
        var LeafIcon = L.Icon.extend({
          options: {
            iconSize: [38, 38],
            shadowSize: [50, 64],
            iconAnchor: [22, 94],
            shadowAnchor: [4, 62],
            popupAnchor: [-3, -96],
          },
        });

        var greenIcon = new LeafIcon({
          iconUrl: "https://i.ibb.co/Mg2scvy/android-Icon.webp",
        });
        var laptopIcon = new LeafIcon({
          iconUrl: "https://i.ibb.co/kXKF1wv/laptop-png-6771.png",
        });
        var appleIcon = new LeafIcon({
          iconUrl: "https://i.ibb.co/WBqfNV5/iconfinder-56-apple-104447.webp",
        });
        map = L.map("map").setView([51.505, -0.09], 13);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        }).addTo(map);

        L.marker([51.5, -0.09], { icon: greenIcon })
          .addTo(map)
          .bindPopup("A pretty CSS3 popup.<br> Easily customizable.")
          .openPopup();

        L.marker([51.49, -0.1], { icon: laptopIcon })
          .addTo(map)
          .bindPopup("A pretty CSS3 popup.<br> Easily customizable.")
          .openPopup();
        L.marker([51.495, -0.083], { icon: appleIcon })
          .addTo(map)
          .bindPopup("A pretty CSS3 popup.<br> Easily customizable.")
          .openPopup();
      }

      drawMap();

      function toggleMap() {
        
        
        document.querySelector("#mapColumn").style.display =
          document.querySelector("#mapColumn").style.display === "none"
            ? "flex"
            : "none";

            if( document.querySelector("#mapColumn").style.display==='none'){
              document.querySelector('#collapseChartButton').style.display = 'none';
              document.querySelector('#collapseMapButton').innerHTML='Uncollapse Map';
              
            } 
            else {
              document.querySelector('#collapseChartButton').style.display = 'flex';
              document.querySelector('#collapseMapButton').innerHTML='Collapse Map';
             
            }

      }

      function toggleChart() {

        document.querySelector("#chartColumn").style.display =
          document.querySelector("#chartColumn").style.display === "none"
            ? "flex"
            : "none";
            map.invalidateSize();

            if( document.querySelector("#chartColumn").style.display==='none'){
              document.querySelector('#collapseMapButton').style.display = 'none';
              document.querySelector('#collapseChartButton').innerHTML='UnCollapse Map';
            } else {
              document.querySelector('#collapseMapButton').style.display = 'flex';
              document.querySelector('#collapseChartButton').innerHTML='Collapse Map';

            }
        
      }
    </script>
  </body>
</html>
