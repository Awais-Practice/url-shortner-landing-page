<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
      crossorigin="anonymous"
    />

    <title>Document</title>
  </head>
  <body>
    <div id="mainContainer">
      <!-- Header Container code start here -->
      <div class="header">
        <div class="buttonBox">
          <button
            class="linkBtn"
            data-bs-toggle="modal"
            data-bs-target="#exampleModal"
          >
            + Create New Link <img src="./assets/images/share-link.svg" alt="" /
            class="ml-10">
          </button>
        </div>

        <div class="buttonBox settingBtn">
          <button>
            <img src="./assets/images/settings.svg" alt="" class="settingImg" />
          </button>
        </div>
      </div>
      <!-- Header Container code end here -->

      <!-- Content Container code start here  -->
      <div id="contentContainer">
        <div class="col">
          <div class="col-collapseChart border">Collapse Chart</div>
          <div class="col-chart">ddd</div>
        </div>

        <div class="col">
          <div class="col-chart">ddd</div>
          <div class="col-collapseChart collapseChart-map">Collapse Map</div>
        </div>
      </div>
    </div>

    <!-- Button trigger modal -->

    <!-- Modal -->

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Create New Link</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
              onclick="resetNewLinkDialog()"
            ></button>
          </div>
          <div class="modal-body">
            <div class="content">
              <div class="row" style="margin-bottom: 45px">
                <div class="col-sm-12" style="position: relative">
                  <div id="step1" class="contentStep active">
                    <label for=""> Paste Long URL </label><br />
                    <input type="text" />
                    <div class="inputBtn">Create Short URL</div>
                  </div>

                  <div id="step2" class="contentStep">
                    <label for=""> Step 2 </label><br />
                    <input type="text" />
                    <div class="inputBtn">Create Short URL</div>
                  </div>

                  <div id="step3" class="contentStep">
                    <label for=""> Step 3 </label><br />
                    <input type="text" />
                    <div class="inputBtn">Create Short URL</div>
                  </div>
                </div>
              </div>

              <!-- Next Previous buttons -->
              <div style="display: flex; justify-content: center">
                <button
                  id="newLinkBackButton"
                  onclick="newLinkPreviousStep()"
                  type="button"
                  class="btn btn-default"
                  style="margin-right: 20px"
                >
                  <div style="display: inline-block; margin-right: 10px">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-arrow-left"
                      viewBox="0 0 16 16"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"
                      />
                    </svg>
                  </div>

                  Go Back
                </button>

                <button
                  onclick="newLinkNextStep()"
                  type="button"
                  class="btn btn-primary"
                >
                  Next Step
                  <div style="display: inline-block; margin-left: 10px">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-arrow-right"
                      viewBox="0 0 16 16"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"
                      />
                    </svg>
                  </div>
                </button>
              </div>
              <!-- Stepper -->
              <div class="modalStepper">
                <div class="modalStepperContent">
                  <div class="stepperLine">
                    <div class="stepperLineProgress"></div>
                  </div>
                  <div
                    class="modalStep active"
                    id="modalStep1"
                    onclick="openNewLinkContentStep(1)"
                  >
                    <div class="circle">1</div>
                    <div class="label">Paste Link</div>
                  </div>

                  <div
                    class="modalStep"
                    id="modalStep2"
                    onclick="openNewLinkContentStep(2)"
                  >
                    <div class="circle">2</div>
                    <div class="label">Select Domain</div>
                  </div>

                  <div
                    class="modalStep"
                    id="modalStep3"
                    onclick="openNewLinkContentStep(3)"
                  >
                    <div class="circle">3</div>
                    <div class="label">Done</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div> -->
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>

    <script>
      let newLinkStep = 1;

      function newLinkNextStep() {
        // limit steps upto 3 max
        if (newLinkStep < 3) {
          newLinkStep++;
          openNewLinkContentStep(newLinkStep);
        }
      }

      function openNewLinkStepperStep(pNewLinkStep) {
        let steps = document.querySelectorAll(".modalStep");
        steps.forEach((step, index) => {
          if (index + 1 > pNewLinkStep) step.classList.remove("active");
          else step.classList.add("active");
        });

        if (pNewLinkStep === 1)
          document.querySelector(".stepperLineProgress").style.width = "0";
        else if (pNewLinkStep === 2)
          document.querySelector(".stepperLineProgress").style.width = "50%";
        else if (pNewLinkStep === 3)
          document.querySelector(".stepperLineProgress").style.width = "100%";
      }

      function openNewLinkContentStep(pNewLinkStep) {
        let steps = document.querySelectorAll(".contentStep");
        steps.forEach((step) => {
          step.classList.remove("active");
        });

        document.querySelector("#step" + pNewLinkStep).classList.add("active");

        if (pNewLinkStep === 2) showNewLinkBackButton();
        else hideNewLinkBackButton();

        newLinkStep = pNewLinkStep;
        openNewLinkStepperStep(newLinkStep);
      }

      function showNewLinkBackButton() {
        document.querySelector("#newLinkBackButton").style.display = "block";
      }
      function hideNewLinkBackButton() {
        document.querySelector("#newLinkBackButton").style.display = "none";
      }

      function newLinkPreviousStep() {
        // limit prev steps upto 1 min
        if (newLinkStep > 1) {
          newLinkStep--;
          openNewLinkContentStep(newLinkStep);
        }
      }

      function resetNewLinkDialog() {
        openNewLinkContentStep(1);
      }
    </script>
  </body>
</html>
